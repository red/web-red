{{ define "main" }}

	<div class="bg-theme-gradient w-full pb-48 relative">
		{{- range .Params.blocks -}}
			{{- if eq .template "hero" -}}{{ partial "blocks/hero" (dict "Params" .) }}{{- end -}}
		{{- end -}}

		<section class="w-full px-4 py-2">
			<div class="container mx-auto px-4 py-2 border border-solid border-grey-dark">
				<span class="text-rl-gray">{{ i18n "latest_blog" }}:</span>
				{{ range first 1 (where .Data.Pages.ByDate.Reverse "Section" "blog") }}
					<a href="{{ .RelPermalink | relLangURL }}" class="no-underline text-white">
						<span class="font-semibold">{{ .Title }}</span> | <span class="text-rl-gray">{{ i18n "read_more" }}</span>
					</a>
				{{ end }}
			</div>
		</section>

		<svg viewBox="0 0 1440 191" xmlns="http://www.w3.org/2000/svg" class="absolute pin-b" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.414;"><path d="M-0,191.068l1440.82,0l0,-192c0,0 -91.43,96.47 -748.423,91.498c-628.009,-4.753 -692.392,100.502 -692.392,100.502Z" style="fill:#eee;"/></svg>
	</div>

	<div class="w-full">	
			{{- range .Params.blocks -}}
				{{- if eq .template "1up-media" -}}{{ partial "blocks/1up-media" (dict "Params" .) }}{{- end -}}
			{{- end -}}
	</div>
		
	{{- range .Params.blocks -}}
		{{- if eq .template "media-feature" -}}{{ partial "blocks/media-feature" (dict "Params" .) }}{{- end -}}
		{{- if eq .template "narrow-feature" -}}{{ partial "blocks/narrow-feature" (dict "Params" .) }}{{- end -}}
		{{- if eq .template "call-to-action" -}}{{ partial "blocks/cta" (dict "Params" .) }}{{- end -}}
		{{- if eq .template "1up" -}}{{ partial "blocks/1up" (dict "Params" .) }}{{- end -}}
		{{- if eq .template "2up" -}}{{ partial "blocks/2up" (dict "Params" .) }}{{- end -}}
		{{- if eq .template "card-grid" -}}{{ partial "blocks/card-grid" (dict "Params" .) }}{{- end -}}
		{{- if eq .template "grid-list" -}}{{ partial "blocks/grid-list" (dict "Params" .) }}{{- end -}}
	{{- end -}}

	{{ with .Content }}
		<section class="container mx-auto mt-12 px-4 md:px-8 pb-8 text-grey-darker content">
			{{ . }}
		</section>
	{{ end }}
	
	<section class="w-full py-4">
		<div class="container mx-auto flex flex-col items-center px-4">
			<div class="inline-block mb-4">
				<h3 class="font-semibold text-2xl text-rl-gray rl-ctr-title-underline">{{ .Params.code_sample_heading }}</h3>
			</div>
			<code-samples></code-samples>
		</div>
	</section>
		
    <div class="bg-theme-gradient curve-top w-full">
        {{- range .Params.blocks -}}
            {{- if eq .template "action-feature" -}}{{ partial "blocks/action-feature" (dict "Params" .) }}{{- end -}}
            {{- if eq .template "narrow-cta" -}}{{ partial "blocks/narrow-cta" (dict "Params" .) }}{{- end -}}
        {{- end -}}
	</div>
	
	<script>
		{{ $list := .Site.Data.codeSamples -}}
		{{ $length := (len $list) -}}
		window.codeSamples = [
			{{ range $index, $element := $list -}}
			{
				{{ range where .description "lang" $.Site.Home.Lang -}}
				title: {{ .title }},
				description: {{ .body }},
				{{ end -}}
				source: {{ .code }}
			}{{ if ne (add $index 1) $length }},{{ end }}
			{{ end }}
		];
	</script>

{{ end }}
